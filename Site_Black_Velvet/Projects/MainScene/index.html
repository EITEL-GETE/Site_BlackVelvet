<!DOCTYPE html>
<html lang="fr">
	<head>
		<title>Black Velvet</title>
		<meta charset="utf-8"/>
		<link rel="shortcut icon" type="image/x-icon" href="./images/logo_drawing_square.png"/>
		<link rel="stylesheet" type="text/css" href="./css/colors.css">
		<link rel="stylesheet" type="text/css" href="./css/font.css">
		<link rel="stylesheet" type="text/css" href="./css/default.css">
		<link rel="stylesheet" type="text/css" href="./css/global.css">
		<link rel="stylesheet" href="./src/styles/style.css">
	</head>

	<body class="width_full height_full">
		<header>
			<div class="portrait">
				<div class="flex_row justify_end">
					<img id="logo-title"   class="outline" src="./images/logo_title.png">
					<img id="logo-drawing" class="outline" src="./images/logo_drawing.png">
				</div>
			</div>
			<div class="landscape">
				<div class="flex_row justify_end">
					<img id="logo-title"   class="outline" src="./images/logo_title.png">
					<img id="logo-drawing" class="outline" src="./images/logo_drawing.png">
				</div>
			</div>
		</header>

        <script>
            // hack for simple-peer
            window.global = window;
            var parcelRequire;
        </script>
        <script type="module" src="./src/generated/gen.js"></script>
        <script type="module" src="./src/main.ts"></script>

        <div id="main" class="transition">
            <needle-engine id="needle"></needle-engine>
        </div>

		<div id="content" class="width_100 height_100">

			<div class="portrait width_100 height_100">
				<div class="width_100 height_100 flex_column justify_center">
					<div class="panel-bot width_100 height_50"></div>
				</div>
			</div>

			<div class="landscape width_100 height_100">
				<div class="width_50 height_100 flex_column justify_center">

					<div id="l-left" class="panel-left height_90 flex_column justify_between transition">
						<div id="panelBG" class="width_100 height_100 flex_column justify_between">
							<div class="width_100 flex_row justify_between">
								<img class="bump0" src="./images/bump/corner.png">
								<img class="bump1" src="./images/bump/center.png">
								<img class="bump2" src="./images/bump/corner.png">
							</div>
							<div class="width_100 flex_row justify_between">
								<img class="bump3" src="./images/bump/corner.png">
								<img class="bump4" src="./images/bump/center.png">
								<img class="bump5" src="./images/bump/corner.png">
							</div>
						</div>

						<div class="width_100 height_100 flex_column justify_start">

							<h1 id="l-title" class="f-ayres margin_top_100p">SALLE : Playa ou bien ?</h1>
							<div class="width_90 height_100 flex_row justify_start align_start">
								
								<div class="flex_column justify_start width_50 height_100">
									<p id="l-description" class="f-simpleText"><span class="bold">Description :</span> Lorem ipsum dolor sit amet, consectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.</p>

									<div class="frame flex_column justify_center user margin_top_20p">
										<h2 class="f-ayres">Capacité :</h2>
										<div class="width_60 flex_row justify_between">
											<p id="l-capacity" class="userPara f-ayres">5x</p>
											<img class="userImg" src="./images/icons/user.png">
										</div>
									</div>

								</div>
							
								<div class="width_50 height_100 flex_column justify_start">
									<img id="l-mainPic" class="width_90" src="./images/rooms/room0.png">

									<div id="l-reserv" class="button margin_top_50p transition" onclick="Reserv(true)">
										<div class="width_100 height_100">
											<div class="width_100 flex_row justify_between">
												<img src="./images/bump/corner.png">
												<img class="r180" src="./images/bump/corner.png">
											</div>
										</div>
										<div class="width_100 height_100 flex_column justify_center">
											<p class="f-ayres bold transition">RÉSERVER ►</p>
										</div>
									</div>
								</div>
							</div>
						</div>
					</div>

					<div id="l-right" class="panel-right height_90 flex_column justify_between transition">
						<div id="panelBG" class="width_100 height_100 flex_column justify_between">
							<div class="width_100 flex_row justify_between">
								<img class="bump0" src="./images/bump/corner.png">
								<img class="bump1" src="./images/bump/center.png">
								<img class="bump2" src="./images/bump/corner.png">
							</div>
							<div class="width_100 flex_row justify_between">
								<img class="bump3" src="./images/bump/corner.png">
								<img class="bump4" src="./images/bump/center.png">
								<img class="bump5" src="./images/bump/corner.png">
							</div>
						</div>

						<div class="width_100 height_100 flex_column justify_start">

							<div id="l-back" class="button transition margin_top_50p" onclick="Reserv(false)">
								<div class="width_100 height_100">
									<div class="width_100 flex_row justify_between">
										<img src="./images/bump/corner.png">
										<img class="r180" src="./images/bump/corner.png">
									</div>
								</div>
								<div class="width_100 height_100 flex_column justify_center">
									<p class="f-ayres bold transition">◄ RETOUR</p>
								</div>
							</div>

							<h1 id="l-res-title" class="f-ayres margin_top_20p">Réservation → ...</h1>

							<form id="l-form" class="f-simpleText width_80 frame" method="POST" action=#>

								<h3 class="f-ayres">Date & Heure</h3>
								<div id="l-f-session" class="inputToSelect flex_column transition" onclick="ShowCalendar(true)">
									<legend>- Selectionner date & heure -</legend>
									<input type="date" name="date" class="f-simpleText width_40" required disabled hidden>
									<select name="hour" class="f-simpleText width_40" disabled hidden>
										<option value="" selected>- Choisir un heure -</option>
										<option value="1">de 10h30 à 11h30</option>
									</select>
								</div>

								<h3 class="f-ayres">Coordonnées</h3>
								<div class="width_100 flex_row justify_between">
									<div class="width_40">
										<label>Nom</label><br/>
										<input id="l-f-lastname" type="text" name="lastname" placeholder="Dupon" class="width_100" required>
									</div>
									<div class="width_40">
										<label>Prénom</label><br/>
										<input id="l-f-firstname" type="text" name="firstname" placeholder="Jeanne" class="width_100" required>
									</div>
								</div>
								<div class="width_100 flex_row justify_between">
									<div class="width_40">
										<label>Adresse email</label><br/>
										<input type="email" name="email" placeholder="j.dupon@email.fr" class="width_100" required>
									</div>
									<div class="width_40">
										<label>Téléphone</label><br/>
										<input id="l-f-phone" type="tel" name="phone" placeholder="06 -- -- -- --" class="width_100" required>
									</div>
								</div>

								<h3 class="f-ayres">Informations</h3>
								<label>Nombre de personnes</label><br/>
								<div class="width_100 flex_row justify_start">
									<input id="l-f-userNumber" type="nombre" name="number" placeholder="1" value="1" min="1" max="" required>
									<div id="l-f-nbMax">(n personnes maximum)</div>
								</div>

								<input id="l-f-submit" type="button" value="Passer au paiement">
								
							</form>

						</div>
					</div>

				</div>
			</div>
		</div>

		<footer>
			<div class="portrait"><div class="center bold">FOOTER PORTRAIT</div></div>
			<div class="landscape"><div class="center bold">FOOTER LANDSCAPE</div></div>
		</footer>
	</body>

	<script>
		// DISPLAY
		main         = document.getElementById("main");
    	leftPanel    = document.getElementById("l-left");
    	rightPanel   = document.getElementById("l-right");
    	mainPic      = document.getElementById("l-mainPic");
    	title        = document.getElementById("l-title");
    	resTitle     = document.getElementById("l-res-title");
    	description  = document.getElementById("l-description");
    	capacity     = document.getElementById("l-capacity");
    	calendar     = document.getElementById("calendar");

    	// FORM
    	session      = document.getElementById("l-f-session");
    	firstname    = document.getElementById("l-f-firstname");
    	lastname     = document.getElementById("l-f-lastname");
    	phone        = document.getElementById("l-f-phone");
    	userNumber   = document.getElementById("l-f-userNumber");
    	numberMax    = document.getElementById("l-f-nbMax");
    	submit       = document.getElementById("l-f-submit");

    	// DATA
    	titles       = [ "Plage", "Grotte", "Cyber Punk", "Aquarium" ];
    	descriptions = [
    		"Salle de karaoké immersive sur le theme de la plage, plongez vos pieds dans du vrai sable et profitez du moment. Chantez sur vos musiques préférées, en sirotant un cocktail. Dépaysement garantie !",
    		"Salle de karaoké immersive dans le charme d'une maison de Hobits. Venez chanter dans un royaume enchanteur.",
    		"Salle de karaoké immersive dans l'ambiance cyber punk, univers futuristes, chantez et faites un voyage dans le temps.",
    		"Salle de karaoké pour vos anniversaires, Enterrement de vie de jeunes filles, groupes, team business. Options costumes, aquarium 3d."
    	];
    	capacities   = [ 6, 6, 10, 16 ];

    	// DISPLAY
    	function SetPanelState(left, right){
    		leftValue  = left  ? "0" : "-110%";
    		rightValue = right ? "0" : " 110%";
    		if (left && right || !left && !right) mainValue = "-25%";
    		else if (left) mainValue = "0";
    		else mainValue = "-50%";

    		leftPanel.style.transform  = "translateX(" + leftValue  + ")";
    		rightPanel.style.transform = "translateX(" + rightValue + ")";
    		main.style.transform       = "translateX(" + mainValue  + ")";
    	}
    	function SetRoom(room){
    		mainPic.src           = "./images/rooms/room" + room + ".png";
    		title.innerHTML       = titles[room];
    		resTitle.innerHTML    = "Réservation → " + titles[room];
    		description.innerHTML = "<span class='bold'>Description :</span> " + descriptions[room];
    		capacity.innerHTML    = capacities[room] + "x";
    		userNumber.max        = capacities[room];
    		numberMax.innerHTML   = "(" + capacities[room] + " personnes maximum)";
    	}
    	function SelectRoom(room, state){
    		// State :
    		//    0 ->    no panel shown
    		//    1 ->  left panel shown
    		//    2 -> right panel shown

    		SetRoom(room);
    		
    		if      (state == 1) SetPanelState(true , false);
    		else if (state == 2) SetPanelState(false, true );
    		else                 SetPanelState(false, false);
    	}
    	function Reserv(state){
    		console.log(state);
    		SetPanelState(!state, state);
    	}

    	// FORM
    	function ShowCalendar(state){
    		calendar.style.display = state ? "block" : "none";
    	}

    	function Submit(){
    		isFormValid = true;

    		// VERIF : session
    		if (session.classList.contains("inputToSelect"))
    			isFormValid = false;

    		// VERIF : firstname
    		if (firstname.value.length <= 3)
    			isFormValid = false;

    		// VERIF : lastname
    		if (lastname.value.length <= 3)
    			isFormValid = false;

    		// VERIF : phone
    		if (phone.value.length != 10)
    			isFormValid = false;

    		// VERIF : number
    		if (userNumber.value < 1 || userNumber.value > capacities[room])
    			isFormValid = false;
    	}

    	submit.addEventListener("click", Submit);

    	SelectRoom(0, 1);

    </script>

</html>
